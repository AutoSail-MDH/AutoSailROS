<!-- to tests run: rostest ctrl_pkg rostest.tests -->
<launch>
    <node pkg="ctrl_pkg" name="sail_node" type="sail_node.py">
        <rosparam command="load" file="$(find ctrl_pkg)/config/config.yaml"/>
    </node>
    <node name="rudder_node" pkg="ctrl_pkg" type="rudder_node.py" >
        <rosparam command="load" file="$(find ctrl_pkg)/config/config.yaml"/>
    </node>

   <!-- Run unittest and rostest for services -->
    <test pkg="ctrl_pkg" type="unittest_sailcontroller.py" test-name="sail_controller"/>
    <test pkg="ctrl_pkg" type="unittest_rudder_controller.py" test-name="rudder_controller"/>


    <!-- Run publish tests -->
    <test pkg="rostest" type="hztest" test-name="sail_control_hztest">
        <param name="topic" value="sail_control_topic"/>
        <param name="hz" value="60"/>
        <param name="hzerror" value="0.5"/>
        <param name="test_duration" value="10.0"/>
    </test>

    <test pkg="rostest" type="publishtest" test-name="sail_control_pubtest">
        <rosparam>
            topics:
                - name: sail_control_topic
                timeout: 10
                negative: False
        </rosparam>
    </test>

    <test test-name="rudder_controller_test" pkg="rostest" type="hztest" name="hztest1" >
        <param name="topic" value="rudder_controller/rudder_angle" />
        <param name="hz" value="60.0" />
        <param name="hzerror" value="0.5" />
        <param name="test_duration" value="5.0" />
    </test>
</launch>
